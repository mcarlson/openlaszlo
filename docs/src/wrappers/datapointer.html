<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="STYLESHEET" type="text/css" href="../lps/includes/styles.css" /></head>
<body>

<!-- ===================================================================== -->
<!-- = XML information goes here                                         = -->
<!-- ===================================================================== -->
<lzelement title="Datapointer">
    <lztier>LFC</lztier>
    <lzcategory>Data</lzcategory>
    <lzshortdesc>
        A cursor in a dataset.
    </lzshortdesc>
    <lztag>tag-datapointer.xml</lztag>
    <lzapi>api-lzdatapointer.xml</lzapi>
    <seealso>dataset</seealso>
</lzelement>

<p>
A datapointer is an object that represents a pointer to a node in a
<classname>LzDataset</classname>. The datapointer can be repositioned
using either cursor movements calls such as <a
href="#meth-selectNext">selectNext</a>, or by running an XPath request
via <a href="#meth-setXPath">setXPath</a>.
</p>

<p>
Datapointers support a subset of the <a
href="http://www.w3.org/TR/xpath">XPath specification</a>, which uses
a notation similar to the UNIX file-system to refer to nodes within a
dataset. Once a datapointer is bound to a node in a dataset it will
keep pointing to that node until it is moved. If the dataset is edited,
the behavior of the datapointer will be controlled by its <a
href="#attr-rerunxpath">rerunxpath</a> attribute. If this attribute is
true (the default value), it will continue pointing to its current
node as long as it is valid.</p>

<p>The example below demonstrates the use of some of the
features of datapaths to retrieve data from a dataset.</p>

<example title="Using a datapointer to retrieve data from a dataset">
&lt;canvas height="80"&gt;
  &lt;simplelayout spacing="5"/&gt;
  &lt;dataset name="mydata"&gt;
    &lt;record&gt; This is some text 
      &lt;deeper&gt;
        &lt;deeprecord&gt; This is a deeper level &lt;/deeprecord&gt;
        &lt;deeprecord&gt; It's dark down here! &lt;/deeprecord&gt;
        &lt;deeprecord&gt; Last deep record &lt;/deeprecord&gt;
      &lt;/deeper&gt;
    &lt;/record&gt;
    &lt;record&gt; This is more text &lt;/record&gt;
    &lt;record&gt; Exciting no? &lt;/record&gt;
    &lt;record&gt; The final line of text &lt;/record&gt;
  &lt;/dataset&gt;

  &lt;view&gt;
    &lt;simplelayout/&gt;
    <em>&lt;datapointer id="mydp" xpath="mydata:/record[1]"/&gt;</em>
    &lt;button&gt; Move forward with select
      &lt;handler name="onclick"&gt;
        if (mydp.selectNext()) var s = <em>mydp.getNodeText();</em>
        else var s = "hit last record; reset with xpath";
        output.setText(s);
      &lt;/handler&gt;
    &lt;/button&gt;
    &lt;button&gt; Set with XPath
      &lt;handler name="onclick"&gt;
          if (mydp.getNodeName() == "record")
            var xp = <em>"mydata:/record[1]/deeper/deeprecord[1]";</em>
          else var xp = <em>"mydata:/record[1]";</em>
          <em>mydp.setXPath( xp );</em> output.setText(<em>mydp.getNodeText()</em>);
      &lt;/handler&gt;
    &lt;/button&gt;
  &lt;/view&gt;

  &lt;text name="output" width="200"&gt;Data will appear here.&lt;/text&gt;
&lt;/canvas&gt;
</example>
</body>
</html>
<!-- * X_LZ_COPYRIGHT_BEGIN ***************************************************
* Copyright 2001-2006 Laszlo Systems, Inc.  All Rights Reserved.              *
* Use is subject to license terms.                                            *
* X_LZ_COPYRIGHT_END ****************************************************** -->
