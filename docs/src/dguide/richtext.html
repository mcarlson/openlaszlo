<html xmlns="http://www.w3.org/1999/xhtml" id="richtext">
<head>
  <!-- title is currently ignored; doc tool uses h1 instead -->
  <title>Rich Text</title>
</head>

<body>

<!-- Put Chapter title in h1 -->
<h1>Rich Text</h1>


<p>OpenLaszlo provides a rich text object and capabilities for procedurally setting HTML text attributes:</p>




<!--=========================================================================-->
<!-- Major sub-heads in h2, etc                                                               -->
<!--=========================================================================-->
<h2>Overview</h2>

<p>This chapter explains the <tagname link="true">richinputtext</tagname> component, which  allows you to include and manipulate html-formatted text in your applications. This diagram describes the architecture of the rich text editor:</p>

<img class="screenshot" src="images/object_model.png"/>
<p>
To use rich this component, include the line:</p>
<pre>
&lt;include href="/extensions/views/richinputtext.lzx" /&gt;
</pre>
<p>Formatting capabilities include:</p>
<ul>
	<li>Text style of bold, underline, or italics</li>
	<li>Font type and size</li>
	<li>Text color</li>
	<li>Hyperlink creation, specifying a URL, and choosing a target type</li>
	<li>Paragraph alignment: left, right, center</li>
	<li>Block indent/outdent</li>
</ul>
<p>
You can specify html text by:
</p>
<ul>
	<li>Directly including markup</li>
	<li>Using procedural code to set rich text attributes</li>
</ul>
<p>
Each of these methods is described in turn below.
</p>

<h2>Directly including rich text markup</h2>
<p>
You can specify the html formatting directly in the <tagname>richinputtext</tagname> tag, if you escape it with CDATA, like this:
</p>
<example title="Inline markup of rich text">
&lt;canvas bgcolor="#EAEAEA" height="110" width="400"&gt;
&lt;include href="/extensions/views/richinputtext.lzx" /&gt;
    &lt;simplelayout axis="y" spacing="4" /&gt;
    &lt;richinputtext name="myRichText" width="300" height="100"&gt;
        &lt;![CDATA[
            foo &lt;b&gt;bar&lt;/b&gt; baz lum
         ]]&gt;
    &lt;/richinputtext&gt;
&lt;/canvas&gt; 
</example>
<h2>Procedurally modifying text</h2>
<p>
The <method>setTextFormat</method> method allows you to procedurally set text properties. Using <method>setTextFormat</method> is a two step process:
</p>
<ol>
	<li>Create a <classname link="true">LzTextFormat</classname> and assign to it the values of the properties you want to change;</li>
	<li>Pass the <classname>LzTextFormat</classname> object as the argument to the <method>setTextFormat</method> method.</li>
</ol>


<p>
The example below demonstrates several ways that the richinputtext class can be used to apply rich formatted text.
</p>
<example title="Rich text manipulation">
&lt;canvas bgcolor="#EAEAEA" height="600" width="1000"&gt;
&lt;!--- 
    This file demonstrates several ways to use the richinputtext class
    to set the formatting of rich formatted text. Corresponding "get"
    methods also exist.
--&gt; 

&lt;!-- auto-included BUT NOT in lps-dev --&gt; 
&lt;include href="/extensions/views/richinputtext.lzx" /&gt;
&lt;!-- --&gt; 
&lt;debug x="300"/&gt;
&lt;view x="20" y="20"&gt;

&lt;window title="toggleFormat"&gt; 
&lt;simplelayout axis="y" spacing="4" /&gt; 
     
    &lt;!--- These checkboxes use the toggleFormat function to 
        toggle the boldness, italic-ness, or underline-ness of the
        text. 
    --&gt;

    &lt;richinputtext name="rich" width="300" height="100" 
        multiline="true"
         text="This richinputtext demonstrates the toggleFormat api. " &gt;        
    &lt;/richinputtext&gt;

    &lt;checkbox text="bold" onclick="parent.toggleFormat('bold')" /&gt;
    &lt;checkbox text="italic" onclick="parent.toggleFormat('italic')"/&gt;
    &lt;checkbox text="underline" onclick="parent.toggleFormat('underline')"/&gt;

    
    &lt;method name="toggleFormat" args="attr"&gt;
        rich.toggleFormat(attr, 0, 300);
    &lt;/method&gt;
   
&lt;/window&gt;


&lt;window x="120" y="120" title="setTextAttr"&gt;
&lt;simplelayout axis="y" spacing="4" /&gt; 
    
    &lt;!--- With the setTextAttr function, we can set particular attributes
        of text to be particular values, in whatever combinations we choose.
        Notice that only the specified values change; if LzTextFormat.color 
        is not defined, the color of the font doesn't change.         
    --&gt; 
    &lt;richinputtext name="rich" width="300" height="100" 
        multiline="true"
         text="Use setTextFormat to set several formatting attributes at once." &gt;        
    &lt;/richinputtext&gt;
 

    &lt;button onclick="parent.bigAndSans()" &gt;
        make it huge and futura
    &lt;/button&gt;

    &lt;button onclick="parent.redAndSmall()" &gt;
        make it red and big
    &lt;/button&gt;

    &lt;button onclick="parent.blueAndItalic()" &gt;
        make it blue and italic and Times
    &lt;/button&gt;
    
    
    &lt;method name="bigAndSans"&gt;
        var tf = new LzTextFormat();
        tf.font = "Futura";
        tf.size = 32;
        rich.setTextFormat(tf, 0, 300);  
    &lt;/method&gt; 
    
    &lt;method name="redAndSmall"&gt;
        var tf = new LzTextFormat();
        tf.color = red; 
        tf.size = 18;
        rich.setTextFormat(tf, 0, 300);
    &lt;/method&gt;    
    
    &lt;method name="blueAndItalic"&gt;
        var tf = new LzTextFormat();
        tf.color = blue; 
        tf.italic = true;
        tf.font = 'Times'; 
        rich.setTextFormat(tf, 0, 300);  
    &lt;/method&gt;    
        
    

&lt;/window&gt;


&lt;window x="240" y="240" title="applyTextAttr"&gt;
    &lt;simplelayout axis="y" spacing="4" /&gt; 

    &lt;richinputtext name="rich" width="300" height="100" 
        multiline="true"
         text="Use applyTextAttr to set a single attribute at a time." &gt;        
    &lt;/richinputtext&gt;

    &lt;slider name="sizeslider" minvalue="10" maxvalue="32" showvalue="false" value="12"&gt;
        &lt;handler name="onvalue"&gt;
            parent.rich.applyTextAttr("size", this.value, 0, 300); 
        &lt;/handler&gt;
    &lt;/slider&gt;
    

&lt;/window&gt; 

&lt;window x="360" y="10" title="Default Format" width="500" height="500"
    id="trickster"&gt;
    &lt;simplelayout axis="y" spacing="4" /&gt; 
    
    &lt;view name="explanation"&gt;
        &lt;text&gt;
        See the richinputtext api documentation for an explanation. 
        &lt;/text&gt;
    &lt;/view&gt;

    &lt;richinputtext name="rich" width="${parent.width-10}" height="100" 
        multiline="true"
         text="01234567890123456789" &gt;        
    &lt;/richinputtext&gt;

    &lt;view name="btns"&gt;
    
        &lt;simplelayout axis="x" spacing="4" /&gt;
        
        &lt;text&gt;Set default format to...&lt;/text&gt;
        &lt;button onclick="parent.parent.redAndBig()" focusable="false" &gt;
            red and big
        &lt;/button&gt;
    
        &lt;button onclick="parent.parent.blueAndItalic()" focusable="false" &gt;
            blue and italic and Times
        &lt;/button&gt;
        

    &lt;/view&gt;        
    
    &lt;view name="trick"&gt;
        &lt;simplelayout axis="x" spacing="4" /&gt;
         &lt;checkbox name="trickcheckbox" text="Use Insertion Point trick" /&gt;

        &lt;text visible="${parent.trickcheckbox.value}"&gt;Move insertion point to...&lt;/text&gt;
        &lt;slider name="slider" minvalue="0" maxvalue="20" showvalue="true" value="12"
            visible="${parent.trickcheckbox.value}"
        &gt;
        &lt;/slider&gt;
    &lt;/view&gt;

    
    &lt;method name="redAndBig"&gt;
        var tf = new LzTextFormat();
        tf.color = red; 
        tf.size = 18;
        rich.setDefaultFormat(tf); 

        var insertionpoint = this.trick.slider.getValue(); 
        
        if (this.trick.trickcheckbox.getValue()) {
            this.forceFormatAt(insertionpoint);
        }

        this.rich.setSelection(insertionpoint + 1, insertionpoint +1); 

        
    &lt;/method&gt;    
    
    &lt;method name="blueAndItalic"&gt;
        var tf = new LzTextFormat();
        tf.color = blue; 
        tf.italic = true;
        tf.font = 'Times'; 
        rich.setDefaultFormat(tf); 

        var insertionpoint = this.trick.slider.getValue(); 
        
        if (this.trick.trickcheckbox.getValue()) {
            this.forceFormatAt(insertionpoint);
        }

        this.rich.setSelection(insertionpoint + 1, insertionpoint +1); 
        
    &lt;/method&gt;    
        
     &lt;method name="forceFormatAt" args="index"&gt;
        // Insert some text
        this.rich.replaceText(index, index, 'AZ');
        
        // Format the text we just inserted
        this.rich.setTextFormat(this.rich.defaultformat, index, index+2); 
        
        // Now if you put the insertion point between the A and Z, you'll
        // get the format specified in default format. 
     &lt;/method&gt;
    

&lt;/window&gt; 

&lt;/view&gt;

&lt;/canvas&gt;
</example>
</body>
</html>
<!-- * X_LZ_COPYRIGHT_BEGIN ***************************************************
* Copyright 2001-2006 Laszlo Systems, Inc.  All Rights Reserved.              *
* Use is subject to license terms.                                            *
* X_LZ_COPYRIGHT_END ****************************************************** -->
