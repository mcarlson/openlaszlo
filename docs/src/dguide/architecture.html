<html xmlns="http://www.w3.org/1999/xhtml" id="architecture"
      xmlns:d="docbook">
<head>
    <title>Architectural Overview</title>
</head>
<body>

<h1>OpenLaszlo Architecture</h1>

<p>
OpenLaszlo is a platform for rich Internet applications that are easy to develop and deploy. 
The OpenLaszlo system architecture combines the power and usability of client/server design with the 
administrative advantages and cost effectiveness of web applications.
</p>
<h2>Deployment Modes</h2>
<p>
OpenLaszlo applications can be made available on the web, or <i>deployed</i> in either of two ways:
</p>
<ul>
   <li><em>Proxied.</em> The OpenLaszlo Server runs on your machine and 
     <ul>
      <li>Compiles source programs as necessary and sends the resultant binary to be executed on the client;</li>
      <li>Proxies interactions between the client and other servers on the Internet, performing data manipulation as necessary</li>
     </ul>
   </li>
   <li><em>SOLO</em>You use the OpenLaszlo compiler to "precompile" programs and make the binary available on your sever. When executed on the
        client, the application contacts other servers directly, without mediation by the OpenLaszlo Server. This is called serverless, or
<i>Standalon OpenLaszlo Output</i> deployment.</li>
</ul>
<p>
Later chapters explain in detail the differences between proxied and SOLO OpenLaszlo applications.  In general:
</p>

<ul>
	<li><em>Proxied</em> applications can do a few things that SOLO applications cannot do, but they are more trouble to deploy 
    and sometimes perform more slowly.</li>
	<li><em>SOLO</em> applications are easier to deploy and sometimes better-performing.</li>
</ul>
<p>
In many cases you don't need to decide which deployment mode to use until you're ready to deploy, and the default choice is usually nonproxied. In reading the discussions below,
keep in mind that when you deploy your applictions statically, the run-time capabilities of OpenLaszlo Server (such as media transcoding and
the persistent connection manager) will not be available.
</p>
<h2>Client and Server:synopsis</h2>
<p>        
OpenLaszlo Server is a Java application that executes in a J2EE servlet
container. The OpenLaszlo Server may communicate with <glossterm>back end</glossterm>
servers and data sources using a variety of protocols. OpenLaszlo
applications written in LZX are compiled by the OpenLaszlo Server and served as bytecode
to a plug in that runs in the client's web browser.  This constitutes
the <dfn>front end</dfn>.  The currently supported run-time
environment, the Flash 5 or higher plug-in, executes consistently and
reliably on a variety of operating systems and device types, including
Windows, Pocket PC, Mac OS, Linux, and Solaris, and a variety of
mobile and set-top box platforms. The OpenLaszlo Server outputs bytecode in the SWF file
format recognized by the Macromedia Flash player (version 6.0 and
higher). Nothing in the OpenLaszlo architecture binds it to Flash,
however.  In the future, OpenLaszlo may support other run time clients as
they become widely available.</p>

<p>
In the OpenLaszlo context, <dfn>client</dfn> means LZX application executing in user's web browser, and <dfn>server</dfn> means
 OpenLaszlo Server (which may, in turn, communicate with other servers).  The LZX client and OpenLaszlo Server server communicate over HTTP; the OpenLaszlo Server sends byte code
 and the LZX application sends XML.</p>

<p>All OpenLaszlo platform features, including streaming media and notification, are delivered over HTTP or HTTPS. OpenLaszlo-based applications 
thus maintain compatibility with standard corporate firewalls. This is a critical capability for public Internet applications.</p>

<img class="illustration" src="images/architecture-1.gif"
     title="Laszlo Client-Server Architecture"/>

<h2>Laszlo Server Architecture</h2>

<p>
The OpenLaszlo Server executes within a standard J2EE application server or Java servlet container running JRE 1.3 or higher. 
These application server environments scale well, as does the OpenLaszlo Server itself. OpenLaszlo applications can run on any OS 
supported by these server products. OpenLaszlo supports Windows, Solaris, Linux and Mac OS X server environments.</p>

<p>The OpenLaszlo Server consists of five main subsystems: </p>

<ul>
   <li>the <glossterm>Interface Compiler</glossterm></li>
   <li>the <glossterm>Media Transcoder</glossterm></li>
   <li>the <glossterm>Data Manager</glossterm></li>
   <li>the <glossterm>Persistent Connection Manager</glossterm></li>
   <li>the <glossterm>Cache</glossterm></li>
</ul>

<img class="illustration" src="images/architecture-2.gif"
     title="Laszlo Server Architecture"/>
<fixme>
The above is an illustration of proxied delployment. There will be an illustration of nonproxied deployment in the 
final 3.0. Release.
</fixme>
<h3>The Interface Compiler</h3>

<p>The <glossterm>Interface Compiler</glossterm> consists of an
<glossterm>LZX Tag Compiler</glossterm>, and a <glossterm>Script
Compiler</glossterm>.  The Interface Compiler additionally invokes the
Media Compiler and the Data Manager to compile media and data sources
that are <glossterm>baked in</glossterm> to the application.</p>

<p>The LZX tag and script compilers convert LZX application
description tags and JavaScript into executable (swf) bytecode for
transmission to the OpenLaszlo client environment. This code is placed into the cache, from which it is sent to the client. Depending on how
the application is invoked, it is transmitted either as a .swf file, or as an HTML file with an embedded .swf object.</p>

<p>        
The Media Transcoder converts a full range of media assets into a single format for rendering by OpenLaszlo's target 
client rendering engine. This enables an OpenLaszlo application to present supported media types in a unified manner on a 
single canvas, without the distraction of multiple helper applications or supplemental playback software.</p>

<p>The Media Transcoder automatically transcodes the following media
types: JPEG, GIF, PNG, MP3, TrueType, and SWF (art/animation
only).</p>

<h3>The Data Manager</h3>

<p>
The Data Manager is comprised of a data compiler that converts all data into a compressed binary format readable by OpenLaszlo 
applications and a series of data connectors that enable OpenLaszlo applications to retrieve data via XML/HTTP. OpenLaszlo applications
 can thus interface across the network with databases, XML Web Services, and Web-server based files or executables.</p>

<h3>The Persistent Connection Manager</h3>

<p>        
The Persistent Connection Manager handles authentication and real-time messaging for OpenLaszlo applications which require them. 
It provides real-time messaging and notification or data push over HTTP.</p>

<warning>This feature is provisional.  It works in limited capacity
situations and is fine to develop with, but we do not recommend
deployment (with the possible exception of low-capacity, non-mission
critical deployment) with this feature. Please consult Laszlo Systems directly
if you have questions about the robustness of an application that uses
this version of the persistent connection.</warning>
<h3>The Cache</h3>
<p>The cache contains the most recently compiled version of any application. The first time an OpenLaszlo application is 
requested, it is compiled and the resultant SWF file is sent to the client. A copy is also cached on the server, so that subsequent
requests do not require waiting for the compilation.</p>


<h2>Laszlo Client Architecture</h2>

<p>
Laszlo's client architecture consists of the OpenLaszlo Runtime Library (ORL), a core library compiled into every OpenLaszlo application 
that provides run-time services (such as, for example, a timer and an idling function) and a presentation renderer to
 provide 2D graphics rendering and sound playback.  
 None of these classes rely on Flash services or use the Flash object model. The Flash 
player is used solely as a rendering engine.</p>


<img class="illustration" src="images/architecture-3.gif"
     title="Laszlo Client Architecture"/>


<example title="Empty Application" extract="false">&lt;canvas/&gt;</example>

<p>        
When this application is running, even though it isn't &quot;doing anything,&quot; nevertheless it is maintaining a connection 
with the server, and all the capabilities necessary for running an LZX application have actually been downloaded.</p>
<p>
There are four primary components within the OpenLaszlo Runtime Library: the Event System, the Data Loader/Binder, the Layout &amp; 
Animation system and a set of Application Services.</p>

<h3>The Event System</h3>

<p>The event system recognizes and handles application events such as
user mouse clicks or server data pushes. This component permits
standard event-based programming on the client. Relative to conventional Web implementations, OpenLaszlo applications typically  
reduce the processing load placed on the host server, by enabling
tasks such as client-side sorting, processing, validation, and dynamic
display across all application states.</p>

<h3>The Data Loader/Binder</h3>

<p>The data loader serves as a data traffic director, accepting data streams
across the network from the OpenLaszlo Server and binding data to
appropriate visual display elements such as text fields, forms, and
menu items.</p>

<h3>The Layout and Animation System</h3>

<p>The layout and animation system provides OpenLaszlo applications with
<glossterm>constraint-based</glossterm> screen layout of interface
elements and <glossterm>algorithmic animation</glossterm> of interface
state changes. This component enables you to build a dynamic
application interface with minimal programming. It allows you to
position a variable number of interface elements using either relative
positioning or absolute pixel positioning. With the animation
algorithms, screen interface updates are rendered in a visually
continuous manner, clearly communicating the application's state
changes to the user. </p>

<h3>OpenLaszlo Services System</h3>

<p>        
The OpenLaszlo runtime includes support 
for timers, sound and modal dialogs.</p>


<h2>Data Flow of an OpenLaszlo Server-proxied OpenLaszlo Application</h2>

<p>This example uses an OpenLaszlo application stored on the server as <code>weather.lzx</code>. The following diagram
illustrates how this application would be executed by the OpenLaszlo Server.</p>

<img class="illustration" src="images/architecture-5.gif"
     title="Laszlo Application Data Flow diagram for the Weather Application"/>

<p>Starting with a user's entering a URL that requests the Weather application, this diagram illustrates the data flow
 sequence from client to server, integrating data from an XML Web service, and sending the result back to the client.</p>

<p>
In OpenLaszlo applications, presentation-related logic is separated from business logic and executed locally on the client. The OpenLaszlo 
server sends the client compressed binary data rather than text, reducing the amount of data transported in 
comparison to HTML-based and other Web applications. Caching on both the server and client eliminates unnecessary code execution and
 data transmission.</p>

<h2>Security Model</h2>

<p>
The OpenLaszlo application platform supports the SSL security model. Data transmissions across the Internet can 
be encrypted using 
SSL encryption over HTTPS. OpenLaszlo applications execute on the client computer within the secure &quot;sandbox&quot; environment of
 the 
Flash Player, and cannot write to the local file system or access the client's native environment.</p>

<p>
Web services and databases used by an OpenLaszlo application are also secured using a per-user authentication model. This 
mechanism prevents use of the OpenLaszlo Server as a proxy or gateway into insecure services or data.</p>

<h2>Platform Support for Multiple Devices</h2>

<p>
The OpenLaszlo architecture is designed to support multiple device types. Its dynamic layout mechanisms enable simple modifications to such properties as an application's overall 
size to be intelligently applied by the platform. This simplifies adapting an application to work on screens and devices of different size.</p>

<p>All screen visualizations in OpenLaszlo appllications use time-based rather than
frame-based animation, and thus transparently accommodate the
processor speed differences of various device types. An interface
transition specified to take 500 milliseconds will take 500
milliseconds regardless of the number of frames shown &#x2014; faster
processors result in more frames and smoother animation, but the same
duration of transition.</p>
<h2>Accessibility</h2>
<p>
OpenLaszlo provides partial support for the <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/msaa/msaastart_9w2t.asp">Microsoft Active Accessibilty</a> specification, which states, "[b]y using Active Accessibility and following accessible design practices, developers can make applications running on Windows more accessible to many people with vision, hearing, or motion disabilities."  For a discussion of this feature, see <xref linkend="program-structure"/>.
This support requires installation of third party software on the client machine, and is only available in the OpenLaszlo targets that run the Flash Player under Internet Explorer.
</p>

<fixme>incorporate swf that shows how amazon.lzx works.</fixme>
<fixme>note on above: not clear that we want to incorporate a swf here.  Included as a "maybe" for after Bonanza.</fixme>

</body>
</html>
<!-- * X_LZ_COPYRIGHT_BEGIN ***************************************************
* Copyright 2001-2006 Laszlo Systems, Inc.  All Rights Reserved.              *
* Use is subject to license terms.                                            *
* X_LZ_COPYRIGHT_END ****************************************************** -->
