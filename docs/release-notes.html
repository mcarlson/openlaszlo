<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta name="generator"
    content="HTML Tidy for Mac OS X (vers 1st December 2004), see www.w3.org" />
    <!-- * X_LZ_COPYRIGHT_BEGIN ***************************************************
* Copyright 2001-2008 Laszlo Systems, Inc.  All Rights Reserved.              *
* Use is subject to license terms.                                            *
* X_LZ_COPYRIGHT_END ****************************************************** -->
    <title>OpenLaszlo 4.2a2 Release Notes</title>
    <meta http-equiv="Content-Type"
    content="text/html; charset=us-ascii" />
    <link rel="stylesheet" href="../lps/includes/explore.css"
    type="text/css" />
    <link rel="SHORTCUT ICON"
    href="http://www.laszlosystems.com/images/laszlo.ico" />
    <script src="sorttable.js" type="text/javascript"></script>
  </head>
  <body class="release-notes">
    <h1>Release Notes for OpenLaszlo 4.2a2</h1>
    <p class="bodytext">OpenLaszlo 4.2a2 is the second step in
    OpenLaszlo's development effort to support the SWF9 runtime.
    There will be frequent iterations, as this branch is under
    heavy development.</p>
    <p>You can find and add specific SWF9 test cases in the
    test/swf9 directory. We rely on these test cases to detect
    SWF9-specific regressions so that they can be swiftly resolved
    during the incremental development process. In addition, there
    is a JIRA project, DevilDog, for tracking SWF9-specific issues
    found here: 
    <a href="http://www.openlaszlo.org/jira/browse/lpp">
    http://www.openlaszlo.org/jira/browse/lpp</a>. Because
    development is also being merged to trunk, other bug reports
    more generally related to adding another runtime are included
    in RingDing.</p>
    <p>For every release, we rely on the OpenLaszlo community to
    help ensure the quality of the platform release and to
    determine its future direction. To propose or participate in
    discussion of new features, see 
    <a href="http://wiki.openlaszlo.org/Enhancement_Proposals">the
    wiki.</a>We encourage you to report any problems, and to make
    suggestions for enhancements, through our 
    <a href="http://www.openlaszlo.org/jira/browse/LPP">JIRA bug
    tracking system.</a></p>
    <p>Please see the 
    <a href="http://download.openlaszlo.org/4.0.0/release-notes.html">
    OpenLaszlo 4.0 Release Notes</a>for an overview of significant
    changes since 3.x.</p>
    <h1>New Features in 4.2a2</h1>
    <p>Many bugs that were introduced by the remodularization of
    the LZX tag compiler to emit JS2 class declarations have been
    repaired. LZX instances that add methods are now compiled as
    anonymous classes. The internal class structure of the LFC has
    been simplified. LZX script blocks work in swf9. Node ID's and
    global names are now properly handled in swf9. The longstanding
    bug of not being able to make forward references to class
    definitions has been resolved.</p>
    <p>Support for API's deprecated before 4.0 has been
    removed.</p>
    <p>Great progress has been made in getting the automated test
    harness running in swf9. Many of the individual tests are
    passing.</p>
    <p>Great progress has been made in getting datasets working in
    swf9. Many of the dataset tests are now passing.</p>
    <p>It will continue to be useful to test your application
    against this release as a way of preparing for the final swf9
    release because the remodularizations and reorganizations of
    the LZX compiler and class system have been made across all
    runtimes, hence testing against swf8 and/or dhtml is useful for
    verifying that your application will be ready to run on
    swf9.</p>
    <h1>Bugs Fixed in 4.2a2</h1>
    <p>You can sort the table by clicking on the table header
    "Key".</p>
    <table class="sortable" id="issuetable" border="1"
    cellpadding="3" width="100%">
      <tr>
        <th class="sorttable_numeric">
          <b>Key</b>
        </th>
        <th>
          <b>Summary</b>
        </th>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5481">
          LPP-5481</a>
        </td>
        <td>XML-RPC does not work in
        openlaszlo-4.0.9.1</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5814">
          LPP-5814</a>
        </td>
        <td>
        test/lztest/lztest-node-initsequence.lzx zorched</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5796">
          LPP-5796</a>
        </td>
        <td>swf/swf9/dhtml: canvas oninit() is
        called twice</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5795">
          LPP-5795</a>
        </td>
        <td>DHTML: resource is not source!</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5790">
          LPP-5790</a>
        </td>
        <td>swf9: default font does not match
        swf8/dhtml</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5788">
          LPP-5788</a>
        </td>
        <td>swf9: canvas does not show up for
        fixed/pixel canvas width/height values</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5786">
          LPP-5786</a>
        </td>
        <td>Mark newly added variables as
        private</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5785">
          LPP-5785</a>
        </td>
        <td>swf9: Fix proxied=true</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5784">
          LPP-5784</a>
        </td>
        <td>Need option to track input line
        numbers to output code</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5782">
          LPP-5782</a>
        </td>
        <td>$lzc$bind_id and $lzc$bind_name
        causing warnings in the debugger</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5781">
          LPP-5781</a>
        </td>
        <td>swf9 - Can't override a userclass
        method in an instance</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5780">
          LPP-5780</a>
        </td>
        <td>Make selectionmanager and
        dataselectionmanager compile for swf9</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5778">
          LPP-5778</a>
        </td>
        <td>Changes to turn off swf7 and
        profile builds in trunk for a bit break laszlo-explorer in
        swf</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5773">
          LPP-5773</a>
        </td>
        <td>id's do not work in swf9</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5759">
          LPP-5759</a>
        </td>
        <td>Turn swf7 and profile builds back
        on for releases</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5755">
          LPP-5755</a>
        </td>
        <td>Images not loading in lzpix dhtml
        after r8600</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5746">
          LPP-5746</a>
        </td>
        <td>Write Release Notes for 4.2a2
        (Yodel)</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5744">
          LPP-5744</a>
        </td>
        <td>Make LzMiniNode a superclass of
        LzNode</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5733">
          LPP-5733</a>
        </td>
        <td>lzpix dragging broken:
        dhtml/swf</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5732">
          LPP-5732</a>
        </td>
        <td>Regression in Amazon @ 8592</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5731">
          LPP-5731</a>
        </td>
        <td>Remove "LzNode#deleteNode(..)"</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5725">
          LPP-5725</a>
        </td>
        <td>In swf9, script when="immediate"
        should be included before any top-level methods</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5719">
          LPP-5719</a>
        </td>
        <td>lztestmanager fails to run in
        swf9</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5713">
          LPP-5713</a>
        </td>
        <td>SWF/DHTML: combobox is broken in
        trunk</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5710">
          LPP-5710</a>
        </td>
        <td>
        test/components/base/lzunit-baseslider.lzx failing</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5702">
          LPP-5702</a>
        </td>
        <td>minor drawview improvements</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5701">
          LPP-5701</a>
        </td>
        <td>swf9 canvas requires a width and
        height attribute</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5700">
          LPP-5700</a>
        </td>
        <td>drawview broken</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5698">
          LPP-5698</a>
        </td>
        <td>trunk deployed on openlaszlo has no
        menus in the navbar</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5697">
          LPP-5697</a>
        </td>
        <td>Appendix B. ECMAScript / Formating
        Error in Table B.1. Supported ECMAScript Properties</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5696">
          LPP-5696</a>
        </td>
        <td>various data-class fixes</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5693">
          LPP-5693</a>
        </td>
        <td>View name's and id's must be valid
        JS identifiers</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5691">
          LPP-5691</a>
        </td>
        <td>lzpix swf7/swf8: picture 'Tags' are
        not displayed correctly.</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5674">
          LPP-5674</a>
        </td>
        <td>Remove
        "LzDatapointer#getXPath()"</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5656">
          LPP-5656</a>
        </td>
        <td>webapprpc reference page
        problems</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5645">
          LPP-5645</a>
        </td>
        <td>
        test/components/base/lzunit-basedatacombobox.lzx broken by
        r8239</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5642">
          LPP-5642</a>
        </td>
        <td>Can't drag to select photos in
        lzpix after r8279</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5625">
          LPP-5625</a>
        </td>
        <td>Implement instances with methods as
        singleton classes</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5614">
          LPP-5614</a>
        </td>
        <td>compiler must not redeclare
        instance variables in subclasses</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5609">
          LPP-5609</a>
        </td>
        <td>LzView and the clip-attribute</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5571">
          LPP-5571</a>
        </td>
        <td>Compiler options for script
        cache/media cache and filename</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-5411">
          LPP-5411</a>
        </td>
        <td>SWF: make cursor work as in
        DHTML</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-4687">
          LPP-4687</a>
        </td>
        <td>Datacombobox doesn't obey
        itemdatapath for selection</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-4469">
          LPP-4469</a>
        </td>
        <td>Update testcase (Was: Datasets
        inside a state don't work)</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-4285">
          LPP-4285</a>
        </td>
        <td>Two memory leaks in
        basedatacombobox</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-3260">
          LPP-3260</a>
        </td>
        <td>DeclareEvent is inefficient</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-3235">
          LPP-3235</a>
        </td>
        <td>"Align" attribute should be
        stored</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-2777">
          LPP-2777</a>
        </td>
        <td>Views that stretch their content
        fail to be clickable</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-1183">
          LPP-1183</a>
        </td>
        <td>align and valign cannot be modified
        once they are set initially</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-1128">
          LPP-1128</a>
        </td>
        <td>LzNode.releaseConstraint doesn't
        appear to work</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-1064">
          LPP-1064</a>
        </td>
        <td>Forward references to classes are
        not permitted</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-683">
          LPP-683</a>
        </td>
        <td>Remove deprecated
        Datapointer.getOtherNodeText()</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-363">
          LPP-363</a>
        </td>
        <td>Dataset destruction problem and
        view datapath rebinding weirdness</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-274">
          LPP-274</a>
        </td>
        <td>applyArgs passes an undocumented
        2nd argument to all setters</td>
      </tr>
      <tr valign="top">
        <td style="white-space: nowrap;">
          <a href="http://www.openlaszlo.org/jira/browse/LPP-151">
          LPP-151</a>
        </td>
        <td>Compiler should emit classes
        first</td>
      </tr>
    </table>
    <h1>New Features in 4.2a1</h1>
    <p>Release 4.2a1 provides preliminary support for classes,
    user-defined classes, layouts, constraints, views, and text
    (with the exception of multi-line text, which is partially
    implemented ). 4.2a1 also supports optional argument syntax, as
    defined by AS3. This was added because SWF9 requires you to
    either exactly match the function signature's number of
    arguments or use the AS3 optional argument syntax. Other
    low-level changes to support SWF9 include a new SWF9 sprite, as
    well as many changes to the compiler.</p>
    <p>User-defined classes and layouts basically work in SWF9.</p>
    <p>There are some new test cases in test/swf9: one for
    user-defined classes to test adding of override declarations
    and one to test 
    <code>&lt;simplelayout&gt;</code>.</p>
    <h1>Application Changes Needed Before Using 4.2a1</h1>
    <p>This section contains changes you should make to ensure that
    your code runs faster and without errors in SWF9. For
    instructions on setting up a SWF9 build environment see 
    <a href="http://wiki.openlaszlo.org/BuildingSWF9">
    BuildingSWF9</a>.</p>
    <!-- The following (up to the next comment) is from Tucker's email "Changes coming..." -->
    <h2>
    <code>&lt;method event="eventname"&gt;</code>is deprecated</h2>
    <p>The syntax 
    <code>&lt;method event="eventname"&gt;</code>is now deprecated
    and will trigger a compiler warning. You should update your
    code to use 
    <code>&lt;handler name="eventname"&gt;</code>;. In the case
    where the method is named ( 
    <code>&lt;method event="eventname"
    name="methodname"&gt;</code>) you will have to split the
    declaration into a handler ( 
    <code>&lt;handler name="eventname" method="methodname"
    /&gt;</code>) and a method ( 
    <code>&lt;method name="methodname"&gt;</code>). [This syntax
    allows subclasses to override the method that will be handling
    the event. See the documentation for 
    <code>handler</code>for further details and examples.</p>
    <h2>Using 
    <code>&lt;class name="name"&gt;</code></h2>
    <p>Classes defined using the 
    <code>&lt;class name="name"&gt;</code>
    <em>must</em>be referenced in script as 
    <code>&lt;lz.name&gt;</code>, there will no longer be a global
    alias 
    <code>name</code>that refers to the class implementing the
    tag.</p>
    <h2>LZX-defined classes now have an internal name</h2>
    <p>The classes that represent LZX-defined classes now have an
    internal name. If you want to know the name of the tag that
    defined an object, you should ask 
    <code>&lt;object&gt;.constructor.tagname</code>, not 
    <code>&lt;object&gt;.constructor.classname&gt;</code>.</p>
    <h2>Method 
    <code>getattribute()</code>deprecated</h2>
    <p>
    <code>getAttribute</code>is deprecated. You should just
    reference the attribute directly; getters are no longer
    supported.</p>
    <h2>Change should 
    <em>not</em> affect user code</h2>
    <p>Initial values, initial expressions ($once, $path, $style,
    and $always), are now created as a unified list in the tag
    compiler solving several issues with overriding/inheritance of
    attribute values and constraints and enabling the solution to
    an issue with states and constraints. As a result, if you
    override 
    <code>LzNode#construct</code>, and attempt to manipulate the 
    <code>args</code>list, you must be aware that some values in
    that list will be 
    <code>LzInitExpr</code>`s and cannot be directly inspected.
    These value represent consraints that will be applied by 
    <code>LzNode#__LZapplyArgs</code>.</p>
    <p>If you 
    <em>do</em>have classes that override 
    <code>construct</code>
    <em>and</em>expect to manipulate the args to that method, you
    will have to update your code when moving to revision
    4.2a1.</p>
    <!-- The following is from the wiki page at http://wiki.openlaszlo.org/SWF9_Conversion -->
    <h2>You cannot delete "fixtures" (declared instance vars) of an
    instance</h2>
    <p>We have code in the LFC that deletes var in order to free up
    memory or null them out. These have to be checked, and in most
    cases converted to just set the value to null when possible.
    For cases where the property really has to be deleted to remove
    shadowing of an instance var, we need to rewrite that code to
    use some other approach.</p>
    <h2>Need to put call to add tagname to constructor map
    *outside* of the class def</h2>
    <pre>
        class LzNode { 
        ...
        }
        
        ConstructorMap['node'] = LzNode;
    
</pre>
    <h2>If you override a superclass method, you must use the
    override keyword</h2>
    <pre>
public override function setWidth (...) { ... }
</pre>
    <h2>All setter methods need to accept a second optional
    arg</h2>
    <p>For now, declare them like this:</p>
    <pre>
function setResize ( val, ignore = null ){
</pre>
    <p>We will fix this soon so you don't need to add the second
    arg.</p>
    <h2>Dependency functions don't work yet</h2>
    <p>Code that declares constraint dependencies by annotating the
    method will not work in swf9.</p>
    <pre>
prototype.getText.dependencies = function(who, self) {
        return [ self, "text" ];
        }
</pre>
    <p>or</p>
    <pre>
prototype.getAttributeRelative.dependencies = function( who,self,
prop ,
        refView ){
    
</pre>
    <p>for now rename these to have a well-known name by appending 
    <code>$dependencies$</code>to the method name, like 
    <code>$lzc$dependencies_getAttributeRelative</code>.</p>
    <h2>Overriding variable definitions</h2>
    <p>You cannot initialize a variable that is already defined in
    a base class using this syntax:</p>
    <pre>
var nodeType = LzDataNode.TEXT_NODE;  // Done in the derived class
</pre>
    <p>Instead, initialize the value in the constructor:</p>
    <pre>
   function LzDataText(text) {
        super();
        ....
        this.nodeType = LzDataNode.TEXT_NODE;
    
</pre>
    <h2>Be careful using the 
    <code>in</code>operator</h2>
    <p>Using 
    <code>in</code>to see if an object contains a method only works
    in swf9 if that method is labeled public.</p>
    <p>For example:</p>
    <pre>
 if (this.context &amp;&amp; 'getContext' in this.context)
</pre>
    <p>will fail. One solution is to make sure the base class has a
    definition for 
    <code>getContext()</code>.</p>
    <h2>Use 
    <code>is</code>operator instead of looking for a property</h2>
    <p>This line of code:</p>
    <pre>
 }else if (n.length) {
</pre>
    <p>fails in swf9 if n does not have a property named 
    <code>length</code>. This check is trying to determine if the
    object is an Array. This can be rewritten as:</p>
    <pre>
}else if (n is Array) {
</pre>
  </body>
</html>
