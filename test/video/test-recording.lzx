<!-- * X_LZ_COPYRIGHT_BEGIN ***************************************************
* Copyright 2006-2007 Laszlo Systems, Inc.  All Rights Reserved.              *
* Use is subject to license terms.                                            *
* X_LZ_COPYRIGHT_END ****************************************************** -->

<!--
    Requires Flash Media Server or red5.
    Create applications directories: test/streams/instance1
    The recorded streams will be saved there.
-->

<canvas width="100%" height="80%" debug="true">


    <debug x="200"/>

    <rtmpconnection id="rtc" 
        autoconnect="true"
        src="rtmp://localhost/test/instance1" 
    />

    <simplelayout inset="10" spacing="10"/>

    <rtmpstatus/>

    <text
        text="${rtc.status}"
    />

    <view
        width="168" 
        height="138"
        bgcolor="black" 
        onmousedown="this.resizer.apply()" 
        onmouseup="this.resizer.remove()"
    >

        <resizestate name="resizer"/> 

        <videoview id="v" 
            x="4" 
            y="4" 
            width="${parent.width-8}" 
            height="${parent.height-18}"
        >

            <mediastream
                debug="true"
        type="rtmp"
        url="temp" 
            />

            <camera
                show="${gShow.value}"
            />

            <microphone
                capturing="${gShow.value}"
            />

        </videoview>

    </view>

    <text
        text="${'time: ' + v.stream.time}"
    />

    <text
        text="${'totaltime: ' + v.stream.totaltime}"
    />

    <checkbox id="gShow" 
        text="show camera"
    />

    <view 
        layout="axis: x; spacing: 10"
    >

        <button
            text="record"
            onclick="gShow.setValue(true); v.stream.record()" 
        />

        <button
            text="stop"
            onclick="v.stream.stop(); gShow.setValue(false)" 
        />

    </view>

    <view
        layout="axis: x; spacing: 10"
    >

        <button
            text="play"
            onclick="gShow.setValue(false); v.stream.play()" 
        />

        <button
            text="pause"
            onclick="v.stream.pause()" 
        />

    </view>


</canvas>
