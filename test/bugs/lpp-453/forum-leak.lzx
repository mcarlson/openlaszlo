<canvas>
  <debug y="10%" height="85%" />
  <attribute name="i" value="0"/>
  <attribute name="j" value="0"/>

  <simplelayout axis="y"/>
  <button>
    create Datatsets
    <method event="onclick">
      <![CDATA[
             this.delegate = new LzDelegate(this,"wait");
             this.wait();
      ]]>
    </method>

    <method name="wait">
      <![CDATA[
             while ((parent.i > parent.j) && this.hasOwnProperty("language"+parent.j)) {
                 this["language"+parent.j].destroy();
                 delete this["language"+parent.j];
                 parent.setAttribute('j', parent.j + 1);
             }
             var ds = new LzDataset(this,
                 {name:"language"+parent.i, src:"languages.xml",
                  type:"http", request:false});
             parent.setAttribute('i', parent.i + 1);
             // Stop after 10
             if (parent.i % 10) {
                 this.delegate.register(ds,"ondata");
             }
             ds.doRequest();
      ]]>
    </method>
  </button>

  <text text="${parent.i}"/>
  <text text="${parent.j}"/>
</canvas>
