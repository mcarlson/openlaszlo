<canvas width="1200" height="600" debug="true">
  <debug x="200" height="400" width="800" fontsize="12" />

    <dataset name="simpleset">
        <resultset/>
    </dataset>

    
    <dataset name="acontact">
        <result id="154" firstname="Chep" displayname="Yo" 
                nickname="Yo" email="chep@arwins.com" home_phone="33-3333" 
                work_phone="444-4444" 
                work_webpage="http://www.laszlosystems.com/" />
    </dataset>
    <view >
      <attribute name="load" value="10"/>
      <attribute name="newclass" type="string"/>
      <attribute name="newattrs"/>

      <button onclick="parent.makeIt()">start</button>
      <button x="50" onclick="parent.deleteIt()">stop</button>

      <datapointer name="ptrToContact" xpath="acontact:/result"/>
      <datapointer name="ptrToDset" xpath="simpleset:/resultset"/>
      <method name="makeIt"><![CDATA[
                Debug.write("simpledat.makeIt(): this.load=", this.load);
                for ( var i = 0; i < this.load; i++ ){
                    var nd = ptrToDset.addNodeFromPointer( ptrToContact );
                    Debug.write("i=",i, nd);
                    nd.destroy();
                }
                Debug.write("simpleedat makeIt(): done");
                ]]>
            </method>
            <method name="deleteIt"><![CDATA[
                 Debug.write("simpledat.deleteit(): this.load=", this.load, ptrToDset);
                 //var k = ptrToDset.selectChild();
                 ptrToDset.setXPath("simpleset:/resultset");
                 ptrToDset.selectChild();
                 var i = 0;
                 while ( ptrToDset.getNodeName() == 'result' ){
                    Debug.write("deleteIt():", i++, ptrToDset.getNodeName() );
                    ptrToDset.deleteNode();
                }
                Debug.write("simpledat.deleteit(): done");

                ]]>
            </method>

            <view width="200" y="20">
                <simplelayout/>
                <view bgcolor="#ffffcc" datapath="simpleset:/resultset/*">
                    <text width="100" datapath="@email"/>
                    <simplelayout axis="x"/>
                </view>
            </view>


        </view>
    <simplelayout/>

<script>
Debug.write("Press 'Start', then 'Stop'");
</script>
</canvas>
