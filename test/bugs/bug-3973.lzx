<canvas height="500" debug="true">
	<include href="lzunit"/>

	<TestSuite>
		<TestCase>
			<datapointer name="test_dp" xpath="mydata:/first"/>
			<text name="datatext" datapath="mydata:/first/text()"/>
			
			<method event="oninit">
				canvas.mydata = new LzDataSet(canvas)
				var root_ptr = canvas.mydata.getPointer()
				this.txt = 'level 1 node'
				
				root_ptr.addNode('first', txt)
				root_ptr.selectChild()
				
				assertEquals(txt, root_ptr.getNodeText())
			</method>
			
			<method name="testResetPointer">
				AssertTrue(test_dp.isValid(), '\ndatapointer does not autoreset!')
				test_dp.setXPath(test_dp.xpath)
				AssertTrue(test_dp.isValid(), '\nfailed to force reset of xpath!')
			</method>
			
			<method name="testResetDP">
				AssertEquals(txt, datatext.text, '\ndatapath does not autoreset!')
				datatext.setDataPath("mydata:/first/text()")
				AssertEquals(txt, datatext.text, '\nfailed to force reset of datapath!')
			</method>
		</TestCase>
	</TestSuite>
</canvas>
<!-- * X_LZ_COPYRIGHT_BEGIN ***************************************************
* Copyright 2001-2004 Laszlo Systems, Inc.  All Rights Reserved.              *
* Use is subject to license terms.                                            *
* X_LZ_COPYRIGHT_END ****************************************************** -->
