<canvas>


    <class name="box" height="10" width="10" bgcolor="silver">
        <attribute name="tint" setter="setColorTint(tint)" />

        <method name="setColorTint" args="color, brightness">
            <![CDATA[
                if (color!="" && color!=null){
                    //Isolate RBG from HEX color value
                   // var rgb = parseInt("0x"+color);
                   var rgb = color;
                    var red=(rgb >> 16) & 0xFF;
                    var green=(rgb >> 8) & 0xFF;
                    var blue=rgb & 0xFF;

                   // if (brightness!=0){
                         debug.write("brightness", brightness, this);
                        red=math.floor(100.0 * red/255.0);
                        green=math.floor(100.0 * green/255.0);
                        blue=math.floor(100.0 * blue/255.0);
                    //}

                    debug.write("final rgb", red, green, blue, this);

                    this.setColorTransform( {ra:red, ga:green, ba:blue });
                    this.sendEvent.ontint();
                }
            ]]>
        </method>
    </class>

    <class name="colorgetter">
        <attribute name="text" type="text"/>
        <inputtext name="r" width="20" bgcolor="silver" text="0"/>
        <inputtext name="g" width="20" bgcolor="silver" text="0"/>
        <inputtext name="b" width="20" bgcolor="silver" text="0"/>
        <button onclick="parent.setnewcolor()" text="${parent.text}"/>
        <simplelayout axis="x" spacing="3"/>
        <method name="getValue">
            <![CDATA[
            myred =  Number(this.r.getText());
            mygreen =  Number(this.g.getText());
            myblue =  Number(this.b.getText());

            value = (myred<<16) +
                (mygreen<<8) +
                myblue;
            debug.write(value, myred, mygreen, myblue);
            return value;
            ]]>
        </method>
    </class>

    <box id="mybox"/>

        <colorgetter>set bgcolor
            <method name="setnewcolor">
                mybox.setAttribute('bgcolor', this.getValue());
            </method>
        </colorgetter>
        <colorgetter>set tint
            <method name="setnewcolor">
                mybox.setAttribute('tint', this.getValue());
                debug.write('tint');
            </method>
        </colorgetter>
   <simplelayout spacing="5"/>
<!-- * X_LZ_COPYRIGHT_BEGIN ***************************************************
* Copyright 2001-2004 Laszlo Systems, Inc.  All Rights Reserved.              *
* Use is subject to license terms.                                            *
* X_LZ_COPYRIGHT_END ****************************************************** -->
</canvas>
