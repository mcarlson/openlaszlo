<canvas height="60%" debug="true">
    <debug y="250" height="200" />
    <!-- why doesn't this work? -->

    <dataset name="dsResources" src="resources.xml"/>

    <button>Dump Resources
    <method event="onclick">
        Debug.write("v0:", v0.resource, v0.visible);
        Debug.write("v1:", v1.resource, v1.visible);
        Debug.write("v2:", v2.resource, v2.visible);
        Debug.write("v3:", v3.resource, v3.visible);
        Debug.write("v4:", v4.resource, v4.visible);
    </method>
    </button>
    <!-- WORKS -->
    <wrappinglayout />

    <view id="v0" resource="${'http:../resources/logo.png'}" />
    <view id="v00" resource="${'http:../resources/logo.png'}" />
    <view id="v000" resource="${'http:../resources/logo.png'}" />
    <view id="v0000" resource="${'http:../resources/logo.png'}" />
    <view id="v00000" resource="${'http:../resources/logo.png'}" />



    <!-- WORKS -->
    <view id="v1" resource="${'http:../resources/'+this.fn}" >
        <attribute name="fn" value="'logo.png'" />
    </view>



    <!-- WORKS? - set value in applyData() (or applyValue())
    -->
    <view id="v2" resource="${this.fn}" >
        <attribute name="fn" 
                   value="$path{'dsResources:/resources/logos/employeeLogo0/text()'}"
                   setter="setfn(fn)">
        </attribute>
        <method name="setfn" args="o">
            this.setSource('http:../resources/' + o);

            // why is this necessary here?
            this.setAttribute("visible", true);
        </method>
        <method event="ontimeout">
            Debug.write("timeout", this);

        </method>
    </view>


<?comment

    <!--
        DOESN'T WORK, THOUGH v.resoruce is set to the correct value
    -->
    <view  id="v3" resource="${'http:../resources/'+this.fn}"
           >
        <attribute name="fn" 
                   value="$path{'dsResources:/resources/logos/employeeLogo0/text()'}" />
    </view>
    <method event="ontimeout">
        Debug.write("timeout", this);

        // this doesn't help here
        this.setAttribute("visible", true);            
    </method>


    <view id="v4" resource="${this.fn}" 
          visible="true"
          >
        <attribute name="fn" 
                   value="$path{'dsResources:/resources/logos/employeeLogo0/text()'}"
                   setter="setfn(fn)">
        </attribute>
        <method name="setfn" args="o">
            this.setSource('http:../resources/' + o);
        </method>
        <method event="ontimeout">
            Debug.write("timeout", this);
        </method>

    </view>

    <view id="v5" resource="${this.fn}" >
        <attribute name="fn" 
                   value="$path{'dsResources:/resources/logos/employeeLogo0/text()'}"
                   setter="setfn(fn)">
        </attribute>
        <method name="setfn" args="o">
            this.setResource('http:../resources/' + o);

            // why is this necessary here?
            this.setAttribute("visible", true);
        </method>
        <method event="ontimeout">
            Debug.write("timeout", this);

        </method>
    </view>

    <view id="v6" resource="${this.fn}" 
          visible="true"
          >
        <attribute name="fn" 
                   value="$path{'dsResources:/resources/logos/employeeLogo0/text()'}"
                   setter="setfn(fn)">
        </attribute>
        <method name="setfn" args="o">
            this.setSource('http:../resources/' + o);
        </method>
        <method event="ontimeout">
            Debug.write("timeout", this);
        </method>

    </view>
?>


</canvas>
