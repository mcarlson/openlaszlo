<canvas>
  <debug y="${top.height}" height="${canvas.height - top.height}"/>
  <class name="slowguy">
    <datapath xpath="x"/>
    <attribute name="slowness" value="50"/>
    <method event="onconstruct">
      <![CDATA[
               a = [1,2,3,4];
               for ( var i = 0; i < this.slowness; i++ ){
               a.shift( a.pop() );
               }
      ]]>
    </method>
  </class>
  <class name="delBefInit">
    <slowguy/>
    <slowguy/>
    <slowguy/>
    <slowguy>
      <method event="onconstruct">
        Debug.warn('Destroying my parent');
        parent.destroy();
      </method>
    </slowguy>
    <slowguy>
      <slowguy>
        <slowguy>
        </slowguy>
      </slowguy>
    </slowguy>
    <slowguy/>
  </class>
  <view id="top">
    <simplelayout axis="y"/>
    <view height="20" width="20">
      <view bgcolor="red" width="10" height="10" x="20" 
            xoffset="5" yoffset="5" y="20" >
        <animator repeat="Infinity" duration="2000" from="0" to="360"
                  motion="linear" attribute="rotation"/>
      </view>
    </view>
    <button onclick="new delBefInit( canvas );">
      This should create no garbage
    </button>
  </view>
</canvas>
<!-- * X_LZ_COPYRIGHT_BEGIN ***************************************************
     * Copyright 2001-2004 Laszlo Systems, Inc.  All Rights Reserved.              *
     * Use is subject to license terms.                                            *
     * X_LZ_COPYRIGHT_END ****************************************************** -->
