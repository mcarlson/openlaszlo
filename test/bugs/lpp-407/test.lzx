<canvas width="100%" height="100%">
  <debug y="75" height="600" width="800"/>
  <attribute name="i" value="0"/>
  <attribute name="j" value="0"/>

  <simplelayout axis="y"/> 
  <button>
    create Datatsets
    <method event="onclick">
      <![CDATA[
             this.delegate = new LzDelegate(this,"wait");
             this.wait();
      ]]>
    </method>

    <method name="wait">
      <![CDATA[
             while ((parent.i > parent.j) && canvas.datasets.hasOwnProperty("language"+parent.j)) {
                 canvas.datasets["language"+parent.j].destroy();
                 parent.setAttribute('j', parent.j + 1);
             }
             var ds = new LzDataset(this,
                 {name:"language"+parent.i, src:"languages.xml", 
                  type:"http", request:"false"});
             this.delegate.register(ds,"ondata");
             parent.setAttribute('i', parent.i + 1);
             ds.doRequest();
      ]]>
    </method>
  </button>

  <text text="${parent.i}"/>
  <text text="${parent.j}"/>
</canvas>
