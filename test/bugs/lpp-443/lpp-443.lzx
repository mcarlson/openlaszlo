<canvas width="100%" height="100%" debug="true" proxied="false">
  <debug  fontsize="12"/>

<!-- LPP-444

  if you have a dataset that requests a non-existent url, you will get both timeout and error events 
  serverless

  [fixed]

  LPP-443

The argument sent with a dataset's ontimeout and onerror events should be the dataset itself. This allows the developer to register a single delegate for multiple datasets' onerror and ontimeout events.

[looking at that]

-->

<dataset name="myds" 
         request="true"
         src="sleep.jsp?s=30" 
         type="http" 
         timeout="2000" 
/>

<method event="ondata" reference="myds" args="arg">
  Debug.write("load ondata", this, arg);
</method>
<method event="ontimeout" reference="myds" args="arg">
  Debug.write("load ontimeout", this, arg);
</method>
<method event="onerror" reference="myds" args="arg">
  Debug.write("load onerror", this, arg);
</method>


<view layout="axis:y; spacing:2" id="foo" width="200" height="300" bgcolor="#cccccc">
  <simplelayout/>

  <button onclick="parent.doit()">ontimeout</button>
  <button onclick="parent.doit2()">onerror</button>
  <method name="doit">
    myds.doRequest();
  </method>
  <method name="doit2">
    myds.setSrc("nosuch.xml");
    myds.doRequest();
  </method>

  <view datapath="myds:/contacts/contact">
    <view layout="axis:x; spacing:4">
      <text width="120" datapath="summary/@firstname"/>
      <text width="120" datapath="summary/@lastname"/>
    </view>
  </view>
</view>



</canvas>
