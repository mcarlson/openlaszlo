<canvas width="800" height="600">
    <dataset name="selfdata" src="bug-1290.lzx?lzt=xml" type="http" request="true"/>

    <class name="xmlnode" clickable="true">
        <attribute name="haschildren" value="false"/>

        <method event="ondata">
            if( this.datapath.getNodeCount() ){
               this.setAttribute( 'haschildren' , true );
            }
        </method>
        <method event="onclick">
            Debug.write( this + ', ' +  this.datapath);
        </method>

        <simplelayout/>
        <text name="nm" width="600" datapath="name()"/>
        <text name="txt" width="600" datapath="text()" bgcolor="blue" multiline="true"/>

        <state name="childstate">
            <attribute name="apply" value="$always{parent.haschildren}"/>
            <xmlnode x="10" datapath="*" bgcolor="silver"/>
        </state>
    </class>

    <view width="640" height="480" clip="true">
        <view >
            <simplelayout />
            <xmlnode name="repl" datapath="selfdata:/*"/>
        </view>
        <scrollbar/>
    </view>
</canvas>
<!-- * X_LZ_COPYRIGHT_BEGIN ***************************************************
* Copyright 2001-2004 Laszlo Systems, Inc.  All Rights Reserved.              *
* Use is subject to license terms.                                            *
* X_LZ_COPYRIGHT_END ****************************************************** -->
