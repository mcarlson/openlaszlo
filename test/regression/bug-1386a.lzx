<canvas debug="true" oninit="debug.sety(260)">
    <dataset name="mydata">
        <item>
            <time>7pm</time>
            <name>Birthday Party</name>
            <place>Bret's house</place>
        </item>
    </dataset>
    <dataset name="blank">
        <item>
            <time>8am</time>
            <name>New Event</name>
            <place>location</place>
        </item>
    </dataset>

    <datapointer id="dp" xpath="mydata:/"/>
    <datapointer id="blankp" xpath="blank:/item[0]"/>

    <class name="inputtextbox" extends="inputtext" bgcolor="white">
        <view name="v_border" height="1"       bgcolor="black" width="${parent.width}" />
        <view name="h_border" width="1"  y="1" bgcolor="black" height="${parent.height -1}" />
        <method name="updateData">
            return this.getText();
        </method>
        <method event="onblur">
            this.datapath.updateData();
        </method>
    </class>

   <class name="mycheckbox" onclick="this.setAttribute('value',!this.value)">
       <attribute name="value" value="false" />
       <attribute name="text" value="my checkbox" type="string"/>
       <view width="14" height="14" bgcolor="black">
           <view x="1" y="1" bgcolor="white"
               width="${parent.width-2}" height="${parent.height-2}" >
               <state apply="${classroot.value}">
                   <view width="100%" height="100%" bgcolor="green"/>
               </state>
               </view>
       </view>
       <text text="${parent.label}"/>
       <simplelayout axis="x"/>
   </class>
   <mycheckbox id="cb" text="visible" value="true"/>

   <view bgcolor="blue" datapath="mydata:/">
       <view bgcolor="white" opacity=".6" x="2" >
           <datapath xpath="item" sortpath="time/text()"/>

           <text  datapath="time/text()" width="30" visible="false"/>
           <text  datapath="name/text()" width="120" visible="${!parent.parent.visible}"/>
           <text  width="120">
               <attribute name="mytext" value="''" when="once"/>
               <attribute name="text" value="${cb.value ? mytext : ''}"/>
               <datapath xpath="place/text()"/>
               <method name="applyData" args="d">
                   setAttribute('mytext', d);
               </method>
               <!--datapath xpath="${cb.amchecked ? 'place/text()' : ''}"/ -->
           </text>

           <simplelayout spacing="4" axis="x"/>
       </view>

       <simplelayout spacing="2"/>
   </view>

    <view datapath="blank:/item">
        <inputtextbox datapath="time/text()"/>
        <inputtextbox datapath="name/text()"/>
        <inputtextbox datapath="place/text()"/>
        <button onclick="parent.add()">Add</button>
        <method name="add">
            debug.write("dp:"+dp);
            debug.write("blankp:"+blankp);
            dp.AddNodeFromPointer(blankp);
        </method>
        <simplelayout spacing="10" axis="x"/>

    </view>
    <simplelayout spacing="20"/>

</canvas>
<!-- * X_LZ_COPYRIGHT_BEGIN ***************************************************
* Copyright 2001-2004 Laszlo Systems, Inc.  All Rights Reserved.              *
* Use is subject to license terms.                                            *
* X_LZ_COPYRIGHT_END ****************************************************** -->
